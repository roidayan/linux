From: Vladimir Sokolovsky <vlad@mellanox.com>
Subject: [PATCH] BACKPORT: rds for SLES11SP1

Signed-off-by: Vladimir Sokolovsky <vlad@mellanox.com>
---
 net/rds/bind.c    |    3 +++
 net/rds/ib_cm.c   |    3 +++
 net/rds/ib_send.c |    3 +++
 net/rds/iw_cm.c   |    3 +++
 net/rds/iw_rdma.c |    3 +++
 net/rds/iw_send.c |    3 +++
 net/rds/send.c    |    3 +++
 7 files changed, 21 insertions(+), 0 deletions(-)

diff --git a/net/rds/bind.c b/net/rds/bind.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/net/rds/bind.c
+++ b/net/rds/bind.c
@@ -36,6 +36,9 @@
 #include <linux/if_arp.h>
 #include <linux/jhash.h>
 #include <linux/ratelimit.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,38))
+#include <linux/printk.h>
+#endif
 #include "rds.h"
 
 #define BIND_HASH_SIZE 1024
diff --git a/net/rds/ib_cm.c b/net/rds/ib_cm.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/net/rds/ib_cm.c
+++ b/net/rds/ib_cm.c
@@ -35,6 +35,9 @@
 #include <linux/slab.h>
 #include <linux/vmalloc.h>
 #include <linux/ratelimit.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,38))
+#include <linux/printk.h>
+#endif
 
 #include "rds.h"
 #include "ib.h"
diff --git a/net/rds/ib_send.c b/net/rds/ib_send.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/net/rds/ib_send.c
+++ b/net/rds/ib_send.c
@@ -35,6 +35,9 @@
 #include <linux/device.h>
 #include <linux/dmapool.h>
 #include <linux/ratelimit.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,38))
+#include <linux/printk.h>
+#endif
 
 #include "rds.h"
 #include "ib.h"
diff --git a/net/rds/iw_cm.c b/net/rds/iw_cm.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/net/rds/iw_cm.c
+++ b/net/rds/iw_cm.c
@@ -35,6 +35,9 @@
 #include <linux/slab.h>
 #include <linux/vmalloc.h>
 #include <linux/ratelimit.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,38))
+#include <linux/printk.h>
+#endif
 
 #include "rds.h"
 #include "iw.h"
diff --git a/net/rds/iw_rdma.c b/net/rds/iw_rdma.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/net/rds/iw_rdma.c
+++ b/net/rds/iw_rdma.c
@@ -33,6 +33,9 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/ratelimit.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,38))
+#include <linux/printk.h>
+#endif
 
 #include "rds.h"
 #include "iw.h"
diff --git a/net/rds/iw_send.c b/net/rds/iw_send.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/net/rds/iw_send.c
+++ b/net/rds/iw_send.c
@@ -35,6 +35,9 @@
 #include <linux/device.h>
 #include <linux/dmapool.h>
 #include <linux/ratelimit.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,38))
+#include <linux/printk.h>
+#endif
 
 #include "rds.h"
 #include "iw.h"
diff --git a/net/rds/send.c b/net/rds/send.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/net/rds/send.c
+++ b/net/rds/send.c
@@ -38,6 +38,9 @@
 #include <linux/list.h>
 #include <linux/ratelimit.h>
 #include <linux/export.h>
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,38))
+#include <linux/printk.h>
+#endif
 
 #include "rds.h"
 
